{"ast":null,"code":"import _toConsumableArray from\"/home/goutham/typescript-sample/FindTheFalcon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/goutham/typescript-sample/FindTheFalcon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useSelector,useDispatch}from'react-redux';import{Select,Layout,Button}from'antd';import{Link}from'react-router-dom';import{planetsApi,VehiclesApi,GetTokenFromApi,GetResultFromApi}from'../actions/thunkActions';import logo from'./Logo.png';import'./App.css';import SelectPlanet from'./SelectPlanet';import*as actions from'../actions';var Header=Layout.Header,Content=Layout.Content,Footer=Layout.Footer;var Option=Select.Option;var radioStyle={display:'block',height:'30px',lineHeight:'30px'};var Selection=function Selection(){// const message = useSelector((state: State) => state.message);\n// const id = useSelector((state: State) => state.id);\nvar allPlanets=useSelector(function(state){return state.planet;});var allVehicles=useSelector(function(state){return state.vehicle;});var tokens=useSelector(function(state){return state.token;});var dispatch=useDispatch();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),planetArray=_useState2[0],setArray=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),selectedVehicle=_useState4[0],setVehicle=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),vehicleArray=_useState6[0],setVehicleArray=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),time=_useState8[0],setTime=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),selectedPlanetsArray=_useState10[0],setSelectedPlanetsArray=_useState10[1];useEffect(function(){dispatch(GetTokenFromApi());dispatch(planetsApi());dispatch(VehiclesApi());},[]);var vehicleOnChange=function vehicleOnChange(e){var optionSelected=e.target.value;var allSelectedPlanets=allVehicles.filter(function(vehicle){return vehicle.name===optionSelected;});var currentIndex=Number(e.target.name);vehicleArray[currentIndex]=allSelectedPlanets[0];setVehicleArray(_toConsumableArray(vehicleArray));console.log('selected Vehicles ::',vehicleArray);var prevOption=selectedVehicle[currentIndex];selectedVehicle[currentIndex]=optionSelected;setVehicle(_toConsumableArray(selectedVehicle));calculateTime(currentIndex,prevOption,optionSelected);if(prevOption!=optionSelected&&prevOption!=undefined){var indexOfVehicle=allVehicles.map(function(e){return e.name;}).indexOf(prevOption);allVehicles[indexOfVehicle].total_no=allVehicles[indexOfVehicle].total_no+1;var indexOfVehicle2=allVehicles.map(function(e){return e.name;}).indexOf(optionSelected);allVehicles[indexOfVehicle2].total_no=allVehicles[indexOfVehicle2].total_no-1;}else{var _indexOfVehicle=allVehicles.map(function(e){return e.name;}).indexOf(optionSelected);allVehicles[_indexOfVehicle].total_no=allVehicles[_indexOfVehicle].total_no-1;}};var calculateTime=function calculateTime(index,previousOption,optionSelected){if(optionSelected!==previousOption&&previousOption!==undefined){var prevTimeIndex=allVehicles.map(function(e){return e.name;}).indexOf(previousOption);var prevTime=planetArray[index].distance/allVehicles[prevTimeIndex].speed;var indexTime=time+planetArray[index].distance/vehicleArray[index].speed-prevTime;setTime(indexTime);}else{var indextime=time+planetArray[index].distance/vehicleArray[index].speed;setTime(indextime);}};var findFalcone=function findFalcone(){var tokenValue=String(Object.values(tokens));var selectedData={token:tokenValue,planet_names:selectedPlanetsArray,vehicle_names:selectedVehicle};dispatch(GetResultFromApi(selectedData));dispatch(actions.getTime(time));console.log('TIME TAKEN ::',time);};var onSelectChange=function onSelectChange(value,currentIndex){var selectedPlanet=value;var planetDistance=allPlanets.filter(function(planet){return planet.name===selectedPlanet;});var index=currentIndex;planetArray[index]=planetDistance[0];setArray(_toConsumableArray(planetArray));selectedPlanetsArray[index]=selectedPlanet;setSelectedPlanetsArray(_toConsumableArray(selectedPlanetsArray));console.log('parent Componet ::',value,selectedPlanetsArray);};var vehicleOnChangeinSelectPlanet=function vehicleOnChangeinSelectPlanet(e){var optionSelected=e.target.value;var allSelectedPlanets=allVehicles.filter(function(vehicle){return vehicle.name===optionSelected;});var currentIndex=Number(e.target.name);vehicleArray[currentIndex]=allSelectedPlanets[0];setVehicleArray(_toConsumableArray(vehicleArray));console.log('selected Vehicles ::',vehicleArray);var prevOption=selectedVehicle[currentIndex];selectedVehicle[currentIndex]=optionSelected;setVehicle(_toConsumableArray(selectedVehicle));calculateTime(currentIndex,prevOption,optionSelected);if(prevOption!=optionSelected&&prevOption!=undefined){var indexOfVehicle=allVehicles.map(function(e){return e.name;}).indexOf(prevOption);allVehicles[indexOfVehicle].total_no=allVehicles[indexOfVehicle].total_no+1;var indexOfVehicle2=allVehicles.map(function(e){return e.name;}).indexOf(optionSelected);allVehicles[indexOfVehicle2].total_no=allVehicles[indexOfVehicle2].total_no-1;}else{var _indexOfVehicle2=allVehicles.map(function(e){return e.name;}).indexOf(optionSelected);allVehicles[_indexOfVehicle2].total_no=allVehicles[_indexOfVehicle2].total_no-1;}};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"falcone-main-layout\"},/*#__PURE__*/React.createElement(Layout,{className:\"layout \"},/*#__PURE__*/React.createElement(Header,null,/*#__PURE__*/React.createElement(\"div\",{className:\"logo\"},/*#__PURE__*/React.createElement(\"img\",{className:\"falcone-logo\",src:logo,alt:\"falcone-logo\"}),/*#__PURE__*/React.createElement(\"h2\",{className:\"finding-falcone\"},\"FINDING FALCONE\"),/*#__PURE__*/React.createElement(\"p\",{className:\"finding-falcone-restart float-right\"},/*#__PURE__*/React.createElement(Link,{className:\"finding-falcone-restart-link\",to:\"/\"},\"RESTART\")))),/*#__PURE__*/React.createElement(Content,{style:{padding:'0 50px'}},/*#__PURE__*/React.createElement(\"div\",{className:\"site-layout-content falcone-row-primary\"},/*#__PURE__*/React.createElement(\"h5\",{className:\"falcone-text text-center\"},\"Select 4 planets and the space vehicles to search in these planets\"),/*#__PURE__*/React.createElement(\"p\",{className:\"float-left\"},\"TIME TAKEN:\",time),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(SelectPlanet,{index:0,onSelectPlanetChange:onSelectChange,planets:selectedPlanetsArray,planetsArray:planetArray,handleRadioChange:vehicleOnChangeinSelectPlanet})),/*#__PURE__*/React.createElement(\"div\",{className:\"col falcone-col\"},/*#__PURE__*/React.createElement(SelectPlanet,{index:1,onSelectPlanetChange:onSelectChange,planets:selectedPlanetsArray,planetsArray:planetArray,handleRadioChange:vehicleOnChangeinSelectPlanet})),/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(SelectPlanet,{index:2,onSelectPlanetChange:onSelectChange,planets:selectedPlanetsArray,planetsArray:planetArray,handleRadioChange:vehicleOnChangeinSelectPlanet})),/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(SelectPlanet,{index:3,onSelectPlanetChange:onSelectChange,planets:selectedPlanetsArray,planetsArray:planetArray,handleRadioChange:vehicleOnChangeinSelectPlanet}))),selectedVehicle.filter(function(value){return value!==undefined;}).length!==4?'':/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center\"},/*#__PURE__*/React.createElement(Button,{type:\"primary\",onClick:findFalcone},/*#__PURE__*/React.createElement(Link,{to:\"/FindFalcon/result\"},\" FIND FALCONE\")))))),/*#__PURE__*/React.createElement(Footer,{style:{textAlign:'center'}},\"Created for GeekTrust\"))));};export default Selection;","map":{"version":3,"sources":["/home/goutham/typescript-sample/FindTheFalcon/src/components/Selection.tsx"],"names":["React","useEffect","useState","useSelector","useDispatch","Select","Layout","Button","Link","planetsApi","VehiclesApi","GetTokenFromApi","GetResultFromApi","logo","SelectPlanet","actions","Header","Content","Footer","Option","radioStyle","display","height","lineHeight","Selection","allPlanets","state","planet","allVehicles","vehicle","tokens","token","dispatch","planetArray","setArray","selectedVehicle","setVehicle","vehicleArray","setVehicleArray","time","setTime","selectedPlanetsArray","setSelectedPlanetsArray","vehicleOnChange","e","optionSelected","target","value","allSelectedPlanets","filter","name","currentIndex","Number","console","log","prevOption","calculateTime","undefined","indexOfVehicle","map","indexOf","total_no","indexOfVehicle2","index","previousOption","prevTimeIndex","prevTime","distance","speed","indexTime","indextime","findFalcone","tokenValue","String","Object","values","selectedData","planet_names","vehicle_names","getTime","onSelectChange","selectedPlanet","planetDistance","vehicleOnChangeinSelectPlanet","padding","length","textAlign"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, ChangeEvent } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport {\n  Select, Radio, Layout, Button, Skeleton,\n} from 'antd';\nimport { RadioChangeEvent } from 'antd/lib/radio/interface';\nimport { Link } from 'react-router-dom';\nimport {\n  planetsApi,\n  VehiclesApi,\n  GetTokenFromApi,\n  GetResultFromApi,\n} from '../actions/thunkActions';\n\nimport logo from './Logo.png';\nimport './App.css';\nimport { State } from '../reducers';\nimport { Planet, Vehicle, FalconeData } from '../types/types';\nimport SelectPlanet from './SelectPlanet';\nimport * as actions from '../actions';\n\nconst { Header, Content, Footer } = Layout;\nconst { Option } = Select;\n\nconst radioStyle = {\n  display: 'block',\n  height: '30px',\n  lineHeight: '30px',\n};\nconst Selection = () => {\n  // const message = useSelector((state: State) => state.message);\n  // const id = useSelector((state: State) => state.id);\n  const allPlanets = useSelector((state: State) => state.planet);\n  const allVehicles = useSelector((state: State) => state.vehicle);\n  const tokens = useSelector((state: State) => state.token);\n  const dispatch = useDispatch();\n\n  const [planetArray, setArray] = useState<Planet[]>([]);\n  const [selectedVehicle, setVehicle] = useState<Array<string>>([]);\n  const [vehicleArray, setVehicleArray] = useState<Vehicle[]>([]);\n  const [time, setTime] = useState<number>(0);\n  const [selectedPlanetsArray, setSelectedPlanetsArray] = useState<string[]>(\n    [],\n  );\n\n  useEffect(() => {\n    dispatch(GetTokenFromApi());\n    dispatch(planetsApi());\n    dispatch(VehiclesApi());\n  }, []);\n\n  const vehicleOnChange = (e: RadioChangeEvent) => {\n    const optionSelected = e.target.value;\n    const allSelectedPlanets = allVehicles.filter(\n      (vehicle) => vehicle.name === optionSelected,\n    );\n    const currentIndex = Number(e.target.name);\n    vehicleArray[currentIndex] = allSelectedPlanets[0];\n    setVehicleArray([...vehicleArray]);\n    console.log('selected Vehicles ::', vehicleArray);\n    const prevOption = selectedVehicle[currentIndex];\n    selectedVehicle[currentIndex] = optionSelected;\n    setVehicle([...selectedVehicle]);\n    calculateTime(currentIndex, prevOption, optionSelected);\n    if (prevOption != optionSelected && prevOption != undefined) {\n      const indexOfVehicle = allVehicles.map((e) => e.name).indexOf(prevOption);\n      allVehicles[indexOfVehicle].total_no = allVehicles[indexOfVehicle].total_no + 1;\n      const indexOfVehicle2 = allVehicles\n        .map((e) => e.name)\n        .indexOf(optionSelected);\n      allVehicles[indexOfVehicle2].total_no = allVehicles[indexOfVehicle2].total_no - 1;\n    } else {\n      const indexOfVehicle = allVehicles\n        .map((e) => e.name)\n        .indexOf(optionSelected);\n      allVehicles[indexOfVehicle].total_no = allVehicles[indexOfVehicle].total_no - 1;\n    }\n  };\n  const calculateTime = (\n    index: number,\n    previousOption: string,\n    optionSelected: string,\n  ) => {\n    if (optionSelected !== previousOption && previousOption !== undefined) {\n      const prevTimeIndex = allVehicles\n        .map((e) => e.name)\n        .indexOf(previousOption);\n      const prevTime = planetArray[index].distance / allVehicles[prevTimeIndex].speed;\n      const indexTime = time\n        + planetArray[index].distance / vehicleArray[index].speed\n        - prevTime;\n      setTime(indexTime);\n    } else {\n      const indextime = time + planetArray[index].distance / vehicleArray[index].speed;\n      setTime(indextime);\n    }\n  };\n\n  const findFalcone = () => {\n    const tokenValue = String(Object.values(tokens));\n    const selectedData = {\n      token: tokenValue,\n      planet_names: selectedPlanetsArray,\n      vehicle_names: selectedVehicle,\n    };\n\n    dispatch(GetResultFromApi(selectedData));\n    dispatch(actions.getTime(time));\n    console.log('TIME TAKEN ::', time);\n  };\n  const onSelectChange = (value: string, currentIndex: number) => {\n    const selectedPlanet = value;\n    const planetDistance = allPlanets.filter(\n      (planet) => planet.name === selectedPlanet,\n    );\n    const index = currentIndex;\n    planetArray[index] = planetDistance[0];\n    setArray([...planetArray]);\n    selectedPlanetsArray[index] = selectedPlanet;\n    setSelectedPlanetsArray([...selectedPlanetsArray]);\n    console.log('parent Componet ::', value, selectedPlanetsArray);\n  };\n\n  const vehicleOnChangeinSelectPlanet = (e: RadioChangeEvent) => {\n    const optionSelected = e.target.value;\n    const allSelectedPlanets = allVehicles.filter(\n      (vehicle) => vehicle.name === optionSelected,\n    );\n    const currentIndex = Number(e.target.name);\n    vehicleArray[currentIndex] = allSelectedPlanets[0];\n    setVehicleArray([...vehicleArray]);\n    console.log('selected Vehicles ::', vehicleArray);\n    const prevOption = selectedVehicle[currentIndex];\n    selectedVehicle[currentIndex] = optionSelected;\n    setVehicle([...selectedVehicle]);\n    calculateTime(currentIndex, prevOption, optionSelected);\n    if (prevOption != optionSelected && prevOption != undefined) {\n      const indexOfVehicle = allVehicles.map((e) => e.name).indexOf(prevOption);\n      allVehicles[indexOfVehicle].total_no = allVehicles[indexOfVehicle].total_no + 1;\n      const indexOfVehicle2 = allVehicles\n        .map((e) => e.name)\n        .indexOf(optionSelected);\n      allVehicles[indexOfVehicle2].total_no = allVehicles[indexOfVehicle2].total_no - 1;\n    } else {\n      const indexOfVehicle = allVehicles\n        .map((e) => e.name)\n        .indexOf(optionSelected);\n      allVehicles[indexOfVehicle].total_no = allVehicles[indexOfVehicle].total_no - 1;\n    }\n  };\n\n  return (\n    <div>\n      <div className=\"falcone-main-layout\">\n\n        <Layout className=\"layout \">\n          <Header>\n            <div className=\"logo\">\n              <img className=\"falcone-logo\" src={logo} alt=\"falcone-logo\" />\n              <h2 className=\"finding-falcone\">FINDING FALCONE</h2>\n              <p className=\"finding-falcone-restart float-right\">\n                <Link className=\"finding-falcone-restart-link\" to=\"/\">\n                  RESTART\n                </Link>\n              </p>\n            </div>\n          </Header>\n          <Content style={{ padding: '0 50px' }}>\n            <div className=\"site-layout-content falcone-row-primary\">\n              <h5 className=\"falcone-text text-center\">\n                Select 4 planets and the space vehicles to search in these\n                planets\n              </h5>\n              <p className=\"float-left\">\n                TIME TAKEN:\n                {time}\n              </p>\n              <br />\n              <br />\n              <div className=\"row\">\n                <div className=\"col\">\n                  <SelectPlanet\n                    index={0}\n                    onSelectPlanetChange={onSelectChange}\n                    planets={selectedPlanetsArray}\n                    planetsArray={planetArray}\n                    handleRadioChange={vehicleOnChangeinSelectPlanet}\n                  />\n                </div>\n                <div className=\"col falcone-col\">\n                  <SelectPlanet\n                    index={1}\n                    onSelectPlanetChange={onSelectChange}\n                    planets={selectedPlanetsArray}\n                    planetsArray={planetArray}\n                    handleRadioChange={vehicleOnChangeinSelectPlanet}\n                  />\n                </div>\n                <div className=\"col\">\n                  <SelectPlanet\n                    index={2}\n                    onSelectPlanetChange={onSelectChange}\n                    planets={selectedPlanetsArray}\n                    planetsArray={planetArray}\n                    handleRadioChange={vehicleOnChangeinSelectPlanet}\n                  />\n                </div>\n                <div className=\"col\">\n                  <SelectPlanet\n                    index={3}\n                    onSelectPlanetChange={onSelectChange}\n                    planets={selectedPlanetsArray}\n                    planetsArray={planetArray}\n                    handleRadioChange={vehicleOnChangeinSelectPlanet}\n                  />\n                </div>\n              </div>\n              {selectedVehicle.filter((value) => value !== undefined).length\n              !== 4 ? (\n                  ''\n                ) : (\n                  <>\n                    <div className=\"d-flex justify-content-center\">\n                      <Button type=\"primary\" onClick={findFalcone}>\n                        <Link to=\"/FindFalcon/result\"> FIND FALCONE</Link>\n                      </Button>\n                    </div>\n                  </>\n                )}\n            </div>\n          </Content>\n          <Footer style={{ textAlign: 'center' }}>Created for GeekTrust</Footer>\n        </Layout>\n      </div>\n    </div>\n  );\n};\nexport default Selection;\n"]},"metadata":{},"sourceType":"module"}